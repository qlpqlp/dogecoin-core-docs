<!DOCTYPE HTML>
<html lang="en" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Build-windows - Dogecoin Core [DOGE, Ð]</title>


        <!-- Custom HTML head -->

        <meta name="description" content="Dogecoin CORE Documentation">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../../favicon.svg">
        <link rel="shortcut icon" href="../../favicon.png">
        <link rel="stylesheet" href="../../css/variables.css">
        <link rel="stylesheet" href="../../css/general.css">
        <link rel="stylesheet" href="../../css/chrome.css">
        <link rel="stylesheet" href="../../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../../highlight.css">
        <link rel="stylesheet" href="../../tomorrow-night.css">
        <link rel="stylesheet" href="../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->

        <!-- MathJax -->
        <script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../../toc.js"></script>
    </head>
    <body>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../../toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Dogecoin Core [DOGE, Ð]</h1>

                    <div class="right-buttons">
                        <a href="../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/qlpqlp/dogecoin-core-docs/tree/main/" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        <a href="https://github.com/qlpqlp/dogecoin-core-docs/edit/main/src/en/doc/build-windows.md" title="Suggest an edit" aria-label="Suggest an edit">
                            <i id="git-edit-button" class="fa fa-edit"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="windows-build-notes"><a class="header" href="#windows-build-notes">WINDOWS BUILD NOTES</a></h1>
<p>Below are some notes on how to build Dogecoin Core for Windows.</p>
<p>Most developers use cross-compilation from Ubuntu to build executables for
Windows. This is also used to build the release binaries.</p>
<p>While there are potentially a number of ways to build on Windows (for example using msys / mingw-w64),
using the Windows Subsystem For Linux is the most straightforward. If you are building with
another method, please contribute the instructions here for others who are running versions
of Windows that are not compatible with the Windows Subsystem for Linux.</p>
<h2 id="compiling-with-windows-subsystem-for-linux"><a class="header" href="#compiling-with-windows-subsystem-for-linux">Compiling with Windows Subsystem For Linux</a></h2>
<p>With Windows 10, Microsoft has released a new feature named the <a href="https://msdn.microsoft.com/commandline/wsl/about">Windows
Subsystem for Linux</a>. This
feature allows you to run a bash shell directly on Windows in an Ubuntu-based
environment. Within this environment you can cross compile for Windows without
the need for a separate Linux VM or server.</p>
<p>This feature is not supported in versions of Windows prior to Windows 10 or on
Windows Server SKUs. In addition, it is available <a href="https://msdn.microsoft.com/en-us/commandline/wsl/install_guide">only for 64-bit versions of
Windows</a>.</p>
<p>To get the bash shell, you must first activate the feature in Windows.</p>
<ol>
<li>Enable the Windows Subsystem for Linux feature</li>
</ol>
<ul>
<li>Open the Windows Features dialog (<code>OptionalFeatures.exe</code>)</li>
<li>Enable 'Windows Subsystem for Linux'</li>
<li>Click 'OK' and restart if necessary</li>
</ul>
<ol start="2">
<li>Install Ubuntu</li>
</ol>
<ul>
<li>Open Microsoft Store and search for "Ubuntu 20.04" or use <a href="https://apps.microsoft.com/detail/9mttcl66cpxj">this link</a></li>
<li>Click Install</li>
<li>Reboot (if prompted)</li>
</ul>
<ol start="3">
<li>Complete Installation</li>
</ol>
<ul>
<li>Open a cmd prompt and type "Ubuntu2004"</li>
<li>Create a new UNIX user account (this is a separate account from your Windows account)</li>
</ul>
<p>After the bash shell is active, you can follow the instructions below, starting
with the "Cross-compilation" section. Compiling the 64-bit version is
recommended but it is possible to compile the 32-bit version.</p>
<p>Some people have reported trouble with these steps and recommend that you apply all relevant Windows updates. Also be sure
to enable virtualization in your BIOS if necessary.</p>
<h2 id="cross-compilation"><a class="header" href="#cross-compilation">Cross-compilation</a></h2>
<p>These steps can be performed on, for example, an Ubuntu VM. The depends system
will also work on other Linux distributions, however the commands for
installing the toolchain will be different.</p>
<p>Install the general dependencies. First, ensure your system is updated and has the latest security patches.</p>
<pre><code>sudo apt update
sudo apt upgrade
sudo apt-get install build-essential libtool autotools-dev automake pkg-config bsdmainutils curl git
</code></pre>
<p>A host toolchain (<code>build-essential</code>) is necessary because some dependency
packages (such as <code>protobuf</code>) need to build host utilities that are used in the
build process.</p>
<h2 id="get-the-source-code"><a class="header" href="#get-the-source-code">Get the Source Code</a></h2>
<p>To build Dogecoin from source code, you'll need the source code. Either check it out via <code>git</code> or download
a zip file. (Look at the green "&lt;&gt; Code" button on <a href="https://github.com/dogecoin/dogecoin/">the Dogecoin GitHub repository</a>).</p>
<p>Make sure this code is available in your Ubuntu directory. If you've unzipped a single downloaded file, you may need to change
the permissions of all extracted files with command like:</p>
<p>sudo chmod -R &lt;your_username&gt; .</p>
<p>If you've downloaded via <code>git</code>, do not use <code>sudo</code>. Instead prefer something like:</p>
<pre><code>cd $HOME
git clone https://github.com/dogecoin/dogecoin.git
git checkout &lt;branchname&gt;
</code></pre>
<p>... where <code>&lt;branchname&gt;</code> is the name of the branch you want to build, such as
"1.14.7-dev" for the unstable branch or "master" for the most recent stable
release.</p>
<h2 id="building-for-64-bit-windows"><a class="header" href="#building-for-64-bit-windows">Building for 64-bit Windows</a></h2>
<p>To build executables for Windows 64-bit, install the following dependencies:</p>
<pre><code>sudo apt-get install g++-mingw-w64-x86-64
</code></pre>
<p>For Ubuntu 20.04, set the default mingw32 g++ compiler option to posix:</p>
<pre><code>sudo update-alternatives --config x86_64-w64-mingw32-g++
</code></pre>
<p>...Choose the "posix" (vs 'auto' or 'win32') option, and continue.</p>
<p>Note that for WSL v1 the Dogecoin Core source path MUST be somewhere in the default mount file system, for
example /usr/src/dogecoin, AND not under, for example, /mnt/d/dogecoin.</p>
<p>If this is not the case the dependency autoconf scripts will fail (silently.)
This means you cannot use a directory that is located directly on the host Windows file system to perform the build.</p>
<p>To identify your version of WSL, run the command:</p>
<p>wsl -l -v</p>
<p>If using WSL 1, you'll need to turn off WSL Support for Win32 applications temporarily, or you will get ABI errors and format errors for some .o files.</p>
<p>If using WSL 1 then build using:</p>
<pre><code>PATH=$(echo "$PATH" | sed -e 's/:\/mnt.*//g') # strip out problematic Windows %PATH% imported var
sudo bash -c "echo 0 &gt; /proc/sys/fs/binfmt_misc/status" # Temporarily Disable WSL support for Win32 applications.
cd depends
make HOST=x86_64-w64-mingw32
cd ..
./autogen.sh # not required when building from release tarball
CONFIG_SITE=$PWD/depends/x86_64-w64-mingw32/share/config.site ./configure --prefix=/
make
sudo bash -c "echo 1 &gt; /proc/sys/fs/binfmt_misc/status" # Re-Enable WSL support for Win32 applications.
</code></pre>
<p>If using WSL 2 then you should be able to build just with:</p>
<pre><code>PATH=$(echo "$PATH" | sed -e 's/:\/mnt.*//g') # strip out problematic Windows %PATH% imported var
cd depends
make HOST=x86_64-w64-mingw32
cd ..
./autogen.sh # not required when building from release tarball
CONFIG_SITE=$PWD/depends/x86_64-w64-mingw32/share/config.site ./configure --prefix=/
make
</code></pre>
<p>In either case, be aware that if the first <code>make</code> invocation fails, you will see further errors during the <code>./configure</code> and second <code>make</code> stages. Please
report any errors with this in mind.</p>
<p>Also be careful using the <code>-j</code> flag with any <code>make</code> command. People have reported strange compilation errors when doing so.</p>
<h2 id="building-for-32-bit-windows"><a class="header" href="#building-for-32-bit-windows">Building for 32-bit Windows</a></h2>
<p>To build executables for Windows 32-bit, install the following dependencies:</p>
<pre><code>sudo apt-get install g++-mingw-w64-i686 mingw-w64-i686-dev
</code></pre>
<p>Ensure that this toolchain can build for <code>posix</code> (else you may have compilation errors for Dogecoin's dependencies):</p>
<pre><code>sudo update-alternatives --config i686-w64-mingw32-g++
</code></pre>
<p>Choose the <code>posix</code> option (instead of <code>auto</code> or <code>win32</code>), and continue. Then build using:</p>
<pre><code>cd depends
make HOST=i686-w64-mingw32
cd ..
./autogen.sh # not required when building from tarball
CONFIG_SITE=$PWD/depends/i686-w64-mingw32/share/config.site ./configure --prefix=/
make
</code></pre>
<h2 id="depends-system"><a class="header" href="#depends-system">Depends system</a></h2>
<p>For further documentation on the depends system see <a href="../depends/README.html">README.md</a> in the <code>depends/</code> directory.</p>
<h2 id="installation"><a class="header" href="#installation">Installation</a></h2>
<p>After building using the Windows subsystem it can be useful to copy the compiled
executables to a directory on the windows drive in the same directory structure
as they appear in the release <code>.zip</code> archive. This can be done in the following
way. This will install to <code>c:\workspace\dogecoin</code>, for example:</p>
<pre><code>make install DESTDIR=/mnt/c/workspace/dogecoin
</code></pre>
<div class="dropdown" style="position: fixed; top: 50px; right: 20px; z-index: 1000;"><div class="dropdown-content" style="background-color: #fff;box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2); z-index: 1000;border-radius:5px"><a style='color: black; padding: 5px 5px; text-decoration: none; display: block;' href='/en/index.html'>EN</a><a style='color: black; padding: 5px 5px; text-decoration: none; display: block;' href='/br/index.html'>BR</a><a style='color: black; padding: 5px 5px; text-decoration: none; display: block;' href='/cn/index.html'>CN</a><a style='color: black; padding: 5px 5px; text-decoration: none; display: block;' href='/fr/index.html'>FR</a><a style='color: black; padding: 5px 5px; text-decoration: none; display: block;' href='/ir/index.html'>IR</a><a style='color: black; padding: 5px 5px; text-decoration: none; display: block;' href='/pt/index.html'>PT</a><a style='color: black; padding: 5px 5px; text-decoration: none; display: block;' href='/vn/index.html'>VN</a></div></div>
                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../../en/doc/build-unix.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../../en/doc/developer-notes.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../../en/doc/build-unix.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../../en/doc/developer-notes.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>



        <script>
            window.playground_line_numbers = true;
        </script>

        <script>
            window.playground_copyable = true;
        </script>

        <script src="../../ace.js"></script>
        <script src="../../editor.js"></script>
        <script src="../../mode-rust.js"></script>
        <script src="../../theme-dawn.js"></script>
        <script src="../../theme-tomorrow_night.js"></script>

        <script src="../../elasticlunr.min.js"></script>
        <script src="../../mark.min.js"></script>
        <script src="../../searcher.js"></script>

        <script src="../../clipboard.min.js"></script>
        <script src="../../highlight.js"></script>
        <script src="../../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
